<html><head>
        <meta charset="utf-8">
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, target-densitydpi=medium-dpi, user-scalable=0">
		<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
		<title>Social</title>
    </head>
    <body id="body" bgcolor="#990033">
		<!-----------------remove default margins------------------>
		<style type="text/css">
		
			body {
				margin: 0;
				padding: 0;
			}
		</style>
		<style>
			* {
				max-width: 100%;
			}
		</style>
		
		<!-----------------loading page----------------------------->
        <div id="king">
			<div id="deviceready">
				Connecting to device...
			</div>
		</div>		
		<!------------------scripts--------------------------------->
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script>
		//===================globals================================
		var king = document.getElementById("king");
		var docWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;
		var docHeight= (window.innerHeight > 0) ? window.innerHeight : screen.height;
		var slider = docWidth*.07;
		var fontW = docWidth/25;
		
		//================device ready==============================
        app.initialize();
		
		var page={
		//===================login page=============================
			login: function(){
				$(window).trigger('resize');
				
				//signup div
				handleDOM.create("signup", "DIV", king);
				signup=document.getElementById("signup");
				
				signup.innerHTML="Sign Up Now";
				signup.style.position = "absolute";
				signup.style.textAlign = "center";
				signup.style.border = "thick solid #FBB310";
				signup.style.left=docWidth*.25 + "px";
				signup.style.top=docHeight*.55 +"px";
				signup.style.width=docWidth*.5 + "px";
				signup.style.height=docHeight*.3 + "px";
				
				signup.onclick=function(){
					handleDOM.remove("signup");
					handleDOM.remove("login");
					page.signup();
				}
				
				//login div
				handleDOM.create("login", "FORM", king);
				var login=document.getElementById("login");
				
				handleDOM.create("emailDIV", "DIV", login);
				var email=document.getElementById("emailDIV");
				email.innerHTML="ASU E-Mail:<br><input id='email' type='text' />";
				
				handleDOM.create("passwordDIV", "DIV", login);
				var password=document.getElementById("passwordDIV");
				password.innerHTML="Password:<br><input id='password' type='password' />";
			
				handleDOM.create("submit", "INPUT", login);
				var submit=document.getElementById("submit");
				submit.type="button";
				submit.value="Log In";
				submit.onclick=function(){
					var hr = new XMLHttpRequest();
					var url= "http://strugglingdev-games.com/login.php";
					var em = document.getElementById("email").value;
					var pw = document.getElementById("password").value;
					var vars = "email="+em.toLowerCase()+"&password="+pw;
					hr.open("POST", url, true);
					hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
					hr.onreadystatechange = function(){
						if(hr.readyState==4 && hr.status==200){
							var data=hr.responseText;
							var list=data.split(",");
						}
						
						if(list){
							if(list[0]=="1"){
								submit.value = "Success!";
								setTimeout(function(){
									handleDOM.remove("signup");
									handleDOM.remove("login");
									page.main(list[1], pw);
								}, 500);
							}
							else if(list[0]=="2"){
								submit.value = "Success!";
								setTimeout(function(){
									handleDOM.remove("signup");
									handleDOM.remove("login");
									page.authenticate(list[1], pw);
								}, 500);
							}
							else if(list[0]=="-1"){
								//invalid password
								submit.value = "Re-Submit";
							}
							else if(list[0]==-"-2"){
								//email not found
								submit.value = "Re-Submit";
							}
							else if(list[0]=="-3"){
								//network communication error
								submit.value = "Re-Submit";
							}
						}
					}
					hr.send(vars);
					
					submit.value = "authenticating...";
				};
				
				login.style.position = "absolute";
				login.style.textAlign = "center";
				login.style.border = "thick solid #FBB310";
				login.style.left=docWidth*.25 + "px";
				login.style.top=docHeight*.15 +"px";
				login.style.width=docWidth*.5 + "px";
				login.style.height=docHeight*.3 + "px";
			},
			
		//===================sign up page============================
			signup: function(){
				var validInput=false;
			
				handleDOM.create("signup", "FORM", king);
				var signup=document.getElementById("signup");
				
				handleDOM.create("emailDiv", "DIV", signup);
				var email=document.getElementById("emailDiv");
				email.innerHTML="ASU E-Mail: <input id='email' type='text' />";
				
				handleDOM.create("passwordDiv", "DIV", signup);
				var password=document.getElementById("passwordDiv");
				password.innerHTML="Password: <input id='password' type='password' /><br>Confirm: <input id='password2' type='password' />";
				
				handleDOM.create("submit", "INPUT", signup);
				var submit = document.getElementById("submit");
				submit.type="button";
				submit.value="Create Account";
				submit.onclick=function(){
					if(document.getElementById("password").value===document.getElementById("password2").value){
						validInput=true;
					}
					if(validInput){
						validInput=false;
						var hr = new XMLHttpRequest();
						var url= "http://strugglingdev-games.com/signup.php";
						var em = document.getElementById("email").value;
						var pw = document.getElementById("password2").value;
						var vars = "email="+em.toLowerCase()+"&password="+pw;
						hr.open("POST", url, true);
						hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
						hr.onreadystatechange = function(){
							if(hr.readyState==4 && hr.status==200){
								var return_data=hr.responseText;
								submit.value = return_data;
								if(return_data=="Thanks!"){
									setTimeout(function(){
										handleDOM.remove("submit");
										handleDOM.remove("passwordDiv");
										handleDOM.remove("emailDiv");
										handleDOM.remove("signup");
										page.main(em, pw);
									}, 500);
								}
							}
						}
						hr.send(vars);
						submit.value = "processing...";
					}
				}
			},
		
		//==================validation page==========================
			authenticate: function(em, pw){
				handleDOM.create("validate", "FORM", king);
				var validate=document.getElementById("validate");
				
				handleDOM.create("codeDiv", "DIV", validate);
				var codeDIV=document.getElementById("codeDiv");
				codeDiv.innerHTML="Enter Validation Code:<br><input id='code' type='text' />";
				
				handleDOM.create("submit", "INPUT", validate);
				var submit=document.getElementById("submit");
				submit.type="button";
				submit.value="submit";
				submit.onclick=function(){
						var hr = new XMLHttpRequest();
						var url= "http://strugglingdev-games.com/authenticate.php";
						var code = document.getElementById("code").value;
						var vars = "code="+code+"&email="+em;
						hr.open("POST", url, true);
						hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
						hr.onreadystatechange = function(){
							if(hr.readyState==4 && hr.status==200){
								var return_data=hr.responseText;
								
								if(return_data=="1"){
									submit.value="Verified!";
									setTimeout(function(){
										handleDOM.remove("submit");
										handleDOM.remove("codeDiv");
										handleDOM.remove("validate");
										page.main(em, pw)
									},500);
								}
								else if(return_data=="2"){
									submit.value="Re-Submit";
								}
								else{
									alert("ERROR");
									submit.value="ERROR";
								}
							}
						}
						hr.send(vars);
						submit.value = "verifying...";
				}
			},
	
		//==================main page================================
			main: function(em, pw){
				document.getElementById("body").style.backgroundColor="black";
				//draw main screen
					//slide function
					var currentR=0;
					var currentL=docWidth;
					
					var slideRight = function(){
						setTimeout(function(){
							if(currentR<docWidth){
								currentR +=slider;
								if(currentR>.65*docWidth){
									profileImg.style.left=(1-picW)*docWidth+'px';
								}
								else{
									profileImg.style.left=currentR+'px';
								}
								dashboard.style.left=(picW*docWidth)+currentR+'px';
								search.style.left=(0.9*docWidth)+currentR+'px';
								feed.style.left=currentR+'px';
								slideRight();
							}
							else if(currentR >= docWidth){
								handleDOM.remove("title");
								handleDOM.remove("dashboard");
								
								if(document.getElementById("stories")){
									handleDOM.remove("stories");
									handleDOM.remove("activities");
									handleDOM.remove("meet");
									handleDOM.remove("circles");
								}
								handleDOM.remove("feed");
								
								page.circle(em, pw);
							}
						}, 20);
					}
					
					var slideLeft = function(){
						setTimeout(function(){
							if(currentL>0){
								currentL -=slider;
								if(docWidth-currentL<(.9*docWidth)){
									search.style.width=((docWidth-currentL)+(.1*docWidth))+'px';
									search.style.left=(currentL-(docWidth-(docWidth*.9)))+'px';
								}
								else{
									search.style.width=docWidth +'px';
									search.style.left=0+'px';
								}
								profileImg.style.left=(currentL-docWidth)+'px';
								dashboard.style.left=(currentL-(docWidth-(docWidth*picW)))+'px';
								feed.style.left=(currentL-docWidth)+'px';
								slideLeft();
							}
							else if(currentL <= 0){
								handleDOM.remove("profileImg");
								
								handleDOM.remove("title");
								handleDOM.remove("dashboard");
								
								handleDOM.remove("searchIcon");
								
								if(document.getElementById("stories")){
									handleDOM.remove("stories");
									handleDOM.remove("activities");
									handleDOM.remove("meet");
									handleDOM.remove("circles");
								}
								handleDOM.remove("feed");
								
								page.search(em, pw);
							}
						}, 20);
					}
					
					//create profile picture
					var picW=.225;
					handleDOM.create("profileImg", "IMG", king);
					var profileImg = document.getElementById("profileImg");
					profileImg.src="img/profile.jpg"
					profileImg.style.position="absolute";
					profileImg.style.left=0+'px';
					profileImg.style.top=0+'px';
					profileImg.style.width=picW*docWidth+'px';
					profileImg.style.height=picW*docWidth+'px';
					profileImg.onclick=function(){slideRight();};
					
					//create dashboard
					handleDOM.create("dashboard", "DIV", king);
					var dashboard = document.getElementById("dashboard");
					dashboard.style.position="absolute";
					dashboard.style.left=picW*docWidth+'px';
					dashboard.style.top=0+'px';
					dashboard.style.width=(.9-picW)*docWidth+'px';
					dashboard.style.height=picW*docWidth+'px';
					dashboard.style.backgroundColor = "#990033";
						//title
						handleDOM.create("title", "IMG", dashboard);
						var title=document.getElementById("title");
						title.src="img/title.png";
						title.style.position="relative";
						title.style.width=(.9-picW)*docWidth-(picW*.4*docWidth)+'px';
						title.style.left=picW*.2*docWidth+'px';
						title.style.height=(picW*.8*docWidth)+'px';
						title.style.top=picW*.05*docWidth+'px';
					
					//create search div
					handleDOM.create("search", "DIV", king);
					var search = document.getElementById("search");
					search.style.position="absolute";
					search.style.left=.9*docWidth+'px';
					search.style.top=0+'px';
					search.style.width=.1*docWidth+'px';
					search.style.height=picW*docWidth+'px';
					search.style.backgroundColor = "#990033";
						//search icon
						handleDOM.create("searchIcon", "IMG", search);
						var searchIcon=document.getElementById("searchIcon");
						searchIcon.src="img/search.png";
						searchIcon.style.position="relative";
						searchIcon.style.width=.1*docWidth+'px';
						searchIcon.style.height=(picW-.1)*docWidth+'px';
						searchIcon.style.top=((picW*docWidth)-(.1*docWidth))/2+'px';
						searchIcon.style.left=0+'px';
						searchIcon.onclick=function(){slideLeft()};
					
					//create feed
					handleDOM.create("feed", "DIV", king);
					var feed = document.getElementById("feed");
					feed.style.position="absolute";
					feed.style.left=0+'px';
					feed.style.top=picW*docWidth+'px';
					feed.style.width=docWidth+'px';
					feed.style.minHeight=docHeight-(picW*docWidth)+'px';
					feed.style.backgroundColor="black";
					
						//feed options
				//=======stories feed =========================================
						handleDOM.create("stories", "DIV", feed);
						var stories=document.getElementById("stories");
						stories.style.position="absolute";
						stories.style.left=0+'px';
						stories.style.top=0+'px';
						stories.style.width=docWidth*.5-1+'px';
						stories.style.height=(docHeight-(picW*docWidth))*.5-1+'px';
						stories.style.borderRight="1px solid #990033";
						stories.style.borderBottom="1px solid #990033";
						
							handleDOM.create("storiesImg", "IMG", stories);
							var storiesImg=document.getElementById("storiesImg");
							storiesImg.src="img/storiesImg.png";
							storiesImg.style.position="absolute";
							storiesImg.style.left=docWidth*.5*.1+'px';
							storiesImg.style.top=(docHeight-(picW*docWidth))*.5*.1+'px';
							storiesImg.style.width=docWidth*.5*.8+'px';
							storiesImg.style.height=(docHeight-(picW*docWidth))*.5*.8+'px';
							storiesImg.onclick=function(){storyOptions()};
							
			//===========================================story options=================================
							var storyOptions=function(){
								if(document.getElementById("stories")){
									handleDOM.remove("stories");
									handleDOM.remove("activities");
									handleDOM.remove("meet");
									handleDOM.remove("circles");
								}
								
								handleDOM.create("back", "IMG", feed);
								var back=document.getElementById("back");
								back.src="img/backButton.png";
								back.style.position="absolute";
								back.style.left=docWidth*.05+'px';
								back.style.top=(docHeight-(docWidth*picW))*(1/8)*.3+(docHeight-(docWidth*picW))*.0125+'px';
								back.style.width=(docHeight-(docWidth*picW))*.075+'px';
								back.style.height=(docHeight-(docWidth*picW))*.075+'px';
								back.onclick=function(){
									handleDOM.remove("randomButton");
									handleDOM.remove("sexyButton");
									handleDOM.remove("scaryButton");
									handleDOM.remove("interestingButton");
									handleDOM.remove("funnyButton");
									handleDOM.remove("confessionsButton");
									handleDOM.remove("random");
									handleDOM.remove("sexy");
									handleDOM.remove("scary");
									handleDOM.remove("interesting");
									handleDOM.remove("funny");
									handleDOM.remove("confessions");
									handleDOM.remove("newStory");
									handleDOM.remove("back");
									handleDOM.remove("goStories");
									page.main(em,pw);
								};
								
								//create a new story post
								var createStory=function(anonValue, picValue, catValue, titleValue, contentValue){
									
									if(document.getElementById("newStory")){
										handleDOM.remove("randomButton");
										handleDOM.remove("sexyButton");
										handleDOM.remove("scaryButton");
										handleDOM.remove("interestingButton");
										handleDOM.remove("funnyButton");
										handleDOM.remove("confessionsButton");
										handleDOM.remove("random");
										handleDOM.remove("sexy");
										handleDOM.remove("scary");
										handleDOM.remove("interesting");
										handleDOM.remove("funny");
										handleDOM.remove("confessions");
										handleDOM.remove("newStory");
										handleDOM.remove("goStories");
									}
									//adjust back onclick
									back.onclick=function(){
										handleDOM.remove("titleNew");
										handleDOM.remove("optionsForm");
										handleDOM.remove("postForm");
										
										storyOptions();
									}
									
								//create main divs
									//title
									handleDOM.create("titleNew", "DIV", feed);
									var titleNew=document.getElementById("titleNew");
									titleNew.style.position="absolute";
									titleNew.style.left=docWidth*.2+'px';
									titleNew.style.top=(docHeight-(docWidth*picW))*(1/8)*.3+'px';
									titleNew.style.width=docWidth*.7+'px';
									titleNew.style.height=(docHeight-(picW*docWidth))*.1+'px';
									titleNew.style.backgroundColor="#990033";
									titleNew.style.fontSize=fontW*2+'px';
									titleNew.style.color="#FFFFFF";
									titleNew.innerHTML="&nbspPost Story";
									
									//general post options
									handleDOM.create("optionsForm", "DIV", feed);
									var optionsForm=document.getElementById("optionsForm");
									optionsForm.style.visibility="visible";
									optionsForm.style.position="absolute";
									optionsForm.style.width=docWidth*.8+'px';
									optionsForm.style.minHeight=(docHeight-(picW*docWidth))*.5+'px';
									optionsForm.style.left=docWidth*.1+'px';
									optionsForm.style.top=(docHeight-(picW*docWidth))*(2/8)*.3+(docHeight-(picW*docWidth))*.1+'px';
									optionsForm.style.backgroundColor="#990033";
										//options for new story
										handleDOM.create("anon", "DIV", optionsForm);
										var anon= document.getElementById("anon");
										anon.style.position="absolute";
										anon.style.width=docWidth*.8*.8+'px';
										anon.style.minHeight=((docHeight-(picW*docWidth))*.5)/10+'px';
										anon.style.left=docWidth*.8*.1+'px';
										anon.style.top=((docHeight-(picW*docWidth))*.5)*1/10+'px';
										anon.style.fontSize=docWidth*.8*.07+'px';
										anon.style.color="#FFFFFF";
										anon.innerHTML="<input type='checkbox' id='anonBox'>&nbsp&nbspPost anonymously?</input>";
										document.getElementById("anonBox").style.width=docWidth*.8*.1+'px';
										document.getElementById("anonBox").style.height=docWidth*.8*.1+'px';
										var imgSrc=null;
										
										var checkCheck=function(){
											
											if(document.getElementById('useProfileBox').checked){
												useProfile.innerHTML="<input type='checkbox' id='useProfileBox'>&nbsp&nbspUse default picture?</input>";
												imgSrc=null;
												type.style.top=$('#anon').height()+$('#useProfile').height()+((docHeight-(picW*docWidth))*.5)*3/10+'px';
												document.getElementById('useProfileBox').setAttribute("checked", "false");
												//send xhr
												var hr = new XMLHttpRequest();
												var url= "http://strugglingdev-games.com/newPost.php";
												var vars = "profileOption="+true+"&useDefault="+true;
												hr.open("POST", url, true);
												hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
												hr.onreadystatechange = function(){
													if(hr.readyState==4 && hr.status==200){
														var return_data=hr.responseText;
													}
												}
												hr.send(vars);
											}
											else{
												useProfile.innerHTML="<input type='checkbox' id='useProfileBox'>&nbsp&nbspUse default picture?</input><br><br><div id='imgSrc'></div>";
												imgSrc=document.getElementById('imgSrc');
												imgSrc.innerHTML="Add Img button here";
												type.style.top=$('#anon').height()+$('#useProfile').height()+((docHeight-(picW*docWidth))*.5)*3/10+'px';
											
												//send xhr
												var hr = new XMLHttpRequest();
												var url= "http://strugglingdev-games.com/newPost.php";
												var vars = "profileOption="+true+"&useDefault="+false;
												hr.open("POST", url, true);
												hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
												hr.onreadystatechange = function(){
													if(hr.readyState==4 && hr.status==200){
														var return_data=hr.responseText;
													}
												}
												hr.send(vars);
											}
											
											document.getElementById("useProfileBox").style.width=docWidth*.8*.1+'px';
											document.getElementById("useProfileBox").style.height=docWidth*.8*.1+'px';
											
											optionsForm.style.height=$('#anon').height()+$('#useProfile').height()+((docHeight-(picW*docWidth))*.5)*4/10+$('#type').height()+'px';
											postForm.style.top=(docHeight-(picW*docWidth))*(3/8)*.3+(docHeight-(picW*docWidth))*.1+$('#optionsForm').height()+'px';
																				
										}
										
										handleDOM.create("useProfile", "DIV", optionsForm);
										var useProfile= document.getElementById("useProfile");
										useProfile.style.position="absolute";
										useProfile.style.width=docWidth*.8*.8+'px';
										useProfile.style.minHeight=((docHeight-(picW*docWidth))*.5)/10+'px';
										useProfile.style.left=docWidth*.8*.1+'px';
										useProfile.style.top=$('#anon').height()+((docHeight-(picW*docWidth))*.5)*2/10+'px';
										useProfile.style.fontSize=docWidth*.8*.07+'px';
										useProfile.style.color="#FFFFFF";
										useProfile.innerHTML="<input type='checkbox' id='useProfileBox'>&nbsp&nbspUse default picture?</input>";
										useProfile.onclick=function(){checkCheck()};
										
										document.getElementById("useProfileBox").style.width=docWidth*.8*.1+'px';
										document.getElementById("useProfileBox").style.height=docWidth*.8*.1+'px';
										document.getElementById('useProfileBox').setAttribute("checked", "true");
												
										handleDOM.create("type", "SELECT", optionsForm);
										var type=document.getElementById("type");
										type.style.position="absolute";
										type.style.width=docWidth*.8*.8+'px';
										type.style.minHeight=((docHeight-(picW*docWidth))*.5)/10+'px';
										type.style.left=docWidth*.8*.1+'px';
										type.style.top=$('#anon').height()+$('#useProfile').height()+((docHeight-(picW*docWidth))*.5)*3/10+'px';
										type.style.fontSize=docWidth*.8*.07+'px';
										type.innerHTML="<option value='null'>Category:</option><option value='Confessions'>Confession</option><option value='Funny'>Funny</option><option value='Interesting'>Interesting</option><option value='Scary'>Scary/Creepy</option><option value='sexy'>Sexy</option><option value='Random'>Random/Other</option>";
										
									//create 'preview' post
									handleDOM.create("postForm", "DIV", feed);
									var postForm=document.getElementById("postForm");
									postForm.style.position="absolute";
									postForm.style.width=docWidth*.8+'px';
									postForm.style.minHeight=docWidth*.8*1.35+'px';
									postForm.style.left=docWidth*.1+'px';
									postForm.style.top=(docHeight-(picW*docWidth))*(3/8)*.3+(docHeight-(picW*docWidth))*.1+$('#optionsForm').height()+'px';
									postForm.style.marginBottom=(docHeight-(picW*docWidth))*(1/8)*.3+'px';
									postForm.style.fontSize=docWidth*.8*.05+'px';
									postForm.style.backgroundColor="#990033";
										//sample post img
										handleDOM.create("previewIMG", "DIV", postForm);
										var previewIMG=document.getElementById("previewIMG");
										previewIMG.style.position="absolute";
										previewIMG.style.width=docWidth*.8*.3+'px';
										previewIMG.style.height=docWidth*.8*.3+'px';
										previewIMG.style.left=docWidth*.8*.05+'px';
										previewIMG.style.top=docWidth*.8*.05+'px';
										previewIMG.style.backgroundColor="blue";
										
										handleDOM.create("postContent", "TEXTAREA", postForm);
										var postContent=document.getElementById("postContent");
										postContent.style.visibility="visible";
										postContent.setAttribute("maxlength", 200);
										postContent.style.fontSize=docWidth*.8*.059+'px';
										postContent.placeholder="Your Story...";
										postContent.style.position="absolute";
										postContent.style.width=docWidth*.8*.9+'px';
										postContent.style.minHeight=docWidth*.8*.7+'px';
										postContent.style.left=docWidth*.8*.05+'px';
										postContent.style.top=docWidth*.8*.4+'px';
										postContent.style.marginBottom=docWidth*.8*.05;
										
										//refill values if here from back button
										if(catValue){
											if(anonValue){
												document.getElementById("anonBox").setAttribute("checked", true);
											}
											else{
												document.getElementById("anonBox").checked=false;
											}
											if(picValue){
												document.getElementById("useProfileBox").setAttribute("checked", true);
											}
											else{
												document.getElementById("useProfileBox").checked=false;
											}
											type.value=catValue;
											postContent.defaultValue=contentValue;
										}
										
										handleDOM.create("submitPreview", "INPUT", postForm);
										var submitPreview=document.getElementById("submitPreview");
										submitPreview.type="button";
										submitPreview.style.position="absolute";
										submitPreview.style.left=docWidth*.8*.25+'px';
										submitPreview.style.top=docWidth*.8*1.15+'px';
										submitPreview.style.width=docWidth*.8*.5+'px';
										submitPreview.style.height=docWidth*.8*.15+'px';
										submitPreview.style.backgroundColor="#FBB310";
										submitPreview.style.fontWeight="bold";
										submitPreview.style.fontSize=docWidth*.8*.07+'px';
										submitPreview.style.borderRadius=2*fontW+'px';
										submitPreview.style.borderColor="#FFFFFF";
										submitPreview.style.color="#000000";
										submitPreview.style.fontFamily="helvetica, serif";
										submitPreview.value="Preview";
										submitPreview.onclick=function(){
											submitPreview.style.top=docWidth*.8*1.35+'px';
											if(type.value!='null'&&postContent.value){
											//final submission area================================
												optionsForm.style.visibility="hidden";
												postContent.style.visibility="hidden";
												postForm.style.top=(docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1+'px';
												submitPreview.value="Submit";
												
												handleDOM.create("finalContent", "DIV", postForm);
												var finalContent=document.getElementById("finalContent");
												finalContent.style.fontSize=docWidth*.8*.059+'px';
												finalContent.style.color="#FFFFFF";
												finalContent.style.position="absolute";
												finalContent.style.width=docWidth*.8*.9+'px';
												finalContent.style.minHeight=docWidth*.8*.7+'px';
												finalContent.style.left=docWidth*.8*.05+'px';
												finalContent.style.top=docWidth*.8*.4+'px';
												finalContent.style.marginBottom=docWidth*.8*.05;
												finalContent.style.wordWrap="break-word";
												finalContent.innerHTML=postContent.value;
												
												back.onclick=function(){
													handleDOM.remove("finalContent");
													createStory(document.getElementById("anonBox").checked,document.getElementById("useProfileBox").checked,type.value, postContent.value);
												};
												
												//submit finalized details to server
												submitPreview.onclick=function(){
													var hr = new XMLHttpRequest();
													var url= "http://strugglingdev-games.com/newPost.php";
													var vars = "anonValue="+document.getElementById("anonBox").checked+"&picValue="+document.getElementById("useProfileBox").checked+"&catValue="+type.value+"&contentValue="+postContent.value;
													hr.open("POST", url, true);
													hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
													hr.onreadystatechange = function(){
														if(hr.readyState==4 && hr.status==200){
															var return_data=hr.responseText;
															submitPreview.value="Success!";
															setTimeout(function(){
																handleDOM.remove("back");
																
																handleDOM.remove("titleNew");
																
																handleDOM.remove("optionsForm");
																
																handleDOM.remove("postForm");
																
																page.main(em, pw);
															}, 500);
														}
														else if(hr.readyState==4){
															submitPreview.value="Network Error";
														}
													}
													hr.send(vars);
													submitPreview.value="Posting...";
												}
											}
											else if(type.value=='null'){
												alert("Select a category.");
											}
											else{
												alert("Your story is empty.");
											}
										};
										
										optionsForm.style.height=$('#anon').height()+$('#useProfile').height()+((docHeight-(picW*docWidth))*.5)*4/10+$('#type').height()+'px';
																			
										
								}
								
								//begin displaying the feed
								var rollFeed = function(type){
									var loadedAt=0;
									
									handleDOM.remove("randomButton");
									handleDOM.remove("sexyButton");
									handleDOM.remove("scaryButton");
									handleDOM.remove("interestingButton");
									handleDOM.remove("funnyButton");
									handleDOM.remove("confessionsButton");
									handleDOM.remove("random");
									handleDOM.remove("sexy");
									handleDOM.remove("scary");
									handleDOM.remove("interesting");
									handleDOM.remove("funny");
									handleDOM.remove("confessions");
									handleDOM.remove("newStory");
									handleDOM.remove("goStories");
									
									handleDOM.create("feedTitle", "DIV", feed);
									var feedTitle=document.getElementById("feedTitle");
									feedTitle.style.position="absolute";
									feedTitle.style.left=docWidth*.2+'px';
									feedTitle.style.top=(docHeight-(docWidth*picW))*(1/8)*.3+'px';
									feedTitle.style.width=docWidth*.7+'px';
									feedTitle.style.height=(docHeight-(picW*docWidth))*.1+'px';
									//feedTitle.style.backgroundColor="#990033";
									feedTitle.style.fontSize=(docHeight-(picW*docWidth))*.08+'px';
									feedTitle.style.color="#FBB310";
									feedTitle.innerHTML="&nbspBlurbs";
									
									handleDOM.create("feedPost", "DIV", feed);
									var feedPost=document.getElementById("feedPost");
									feedPost.style.position="absolute";
									feedPost.style.left=docWidth*.1+'px';
									feedPost.style.top=(docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1+'px';
									feedPost.style.width=docWidth*.8+'px';
									feedPost.style.minHeight=(docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9+'px';
									feedPost.style.backgroundColor="#990033";
									feedPost.style.color="#FFFFFF";
									feedPost.innerHTML="<br><br>- - - -><br><br>Settings<br><br><br><br><- - - -<br><br>Begin Viewing";
									
									var feedPosition=0;
									
									var startX = 0;
									var dist = 0;
									var moved = false;
									var feedData;
									var feedIdData=[];
									var feedTypeData=[];
									var feedTitleData=[];
									var feedContentData=[];
									var feedDateData=[];
									var feedCreatorData=[];
									var feedUpVotesData=[];
									var feedDownVotesData=[];
									var feedUpVotedData=[];
									var feedDownVotedData=[];
									var feedFavoritedData=[];
									
									feedPost.addEventListener('touchstart', function(e){
										//e.preventDefault();
										
										var touchObj = e.changedTouches[0];
										startX = parseInt(touchObj.clientX); 
									}, false);
									
									feedPost.addEventListener('touchmove', function(e){
										e.preventDefault();
									
										moved=true;
									
										var touchObj = e.changedTouches[0];
										dist = parseInt(touchObj.clientX) - startX;
										
										feedPost.style.left=docWidth*.1+dist+'px';
										
									}, false);
									
									feedPost.addEventListener('touchend', function(e){
										var didSwipe=false;
										
										var touchObj = e.changedTouches[0];
										
										feedPost.style.left=docWidth*.1+'px';
										
										if(dist>=docWidth*.2 && moved){
											if(feedPosition>=0){
												feedPosition-=1;
												didSwipe=true;
											}
										}
										else if(dist<=-1*docWidth*.2 && moved){
											feedPosition+=1;
											didSwipe=true;
										}
										var loaded=true;
										var loadCheck=function(){
											if(feedPosition%15==1){
												if(loadedAt<feedPosition){
													loaded=false;
													loadedAt=feedPosition;
												}
											}
										}
										
										loadCheck();
										
										var feedSlide=function(){
											if(feedPosition==0&&didSwipe){
												feedTitle.innerHTML="&nbspBlurbs";
												feedPost.innerHTML="<br><br>- - - -><br><br>Settings<br><br><br><br><- - - -<br><br>Begin Viewing";
											}
											else if(feedPosition==-1&&didSwipe){
													feedTitle.innerHTML="&nbspSettings";
													feedPost.innerHTML=null;
													
													handleDOM.create("includes", "DIV", feedPost);
													var includes = document.getElementById("includes");
													includes.style.position="absolute";
													includes.style.width=docWidth*.8*.9+'px';
													includes.style.height=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.65+'px';
													includes.style.left=docWidth*.8*.05+'px';
													includes.style.top=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.04+'px';
													includes.style.fontSize=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.05+'px';
													includes.style.color="#FFFFFF";
													
														handleDOM.create("justText", "DIV", includes);
														var justText=document.getElementById("justText");
														justText.style.position="absolute";
														justText.style.height=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.1+'px';
														justText.style.top=0+'px';
														justText.style.fontSize=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.07+'px';
														justText.innerHTML="Include:";
														
														handleDOM.create("anons", "DIV", includes);
														var anons = document.getElementById("anons");
														anons.style.position="absolute";
														anons.style.height=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.1+'px';
														anons.style.top=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.13+'px';
														anons.innerHTML="<input type='checkbox' id='anonsBox'>&nbspAnonymous Posts</input>";
														anons.style.verticalAlign="top";
														var anonsBox=document.getElementById("anonsBox");
														anonsBox.style.height=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.05+'px';
														anonsBox.style.width=$('#anonsBox').height()+'px';
														
														handleDOM.create("friends", "DIV", includes);
														var friends = document.getElementById("friends");
														friends.style.position="absolute";
														friends.style.height=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.1+'px';
														friends.style.top=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.26+'px';
														friends.innerHTML="<input type='checkbox' id='friendsBox' >&nbspFriend's Posts </input>";
														friends.style.verticalAlign="top";
														var friendsBox=document.getElementById("friendsBox");
														friendsBox.style.height=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.05+'px';
														friendsBox.style.width=$('#friendsBox').height()+'px';
														
														handleDOM.create("publics", "DIV", includes);
														var friends = document.getElementById("publics");
														publics.style.position="absolute";
														publics.style.height=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.1+'px';
														publics.style.top=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.39+'px';
														publics.innerHTML="<input type='checkbox' id='publicsBox'>&nbspPublic Posts</input>";
														publics.style.verticalAlign="top";
														var publicsBox=document.getElementById("publicsBox");
														publicsBox.style.height=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.05+'px';
														publicsBox.style.width=$('#publicsBox').height()+'px';
														
														handleDOM.create("favorites", "DIV", includes);
														var favorites = document.getElementById("favorites");
														favorites.style.position="absolute";
														favorites.style.height=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.1+'px';
														favorites.style.top=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.52+'px';
														favorites.innerHTML="<input type='checkbox' id='favsBox' >&nbspMy Favorited Posts</input>";
														favorites.style.verticalAlign="top";
														var favsBox=document.getElementById("favsBox");
														favsBox.style.height=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.05+'px';
														favsBox.style.width=$('#favsBox').height()+'px';
														
													handleDOM.create("sort", "SELECT", feedPost);
													var sort=document.getElementById("sort");
													sort.style.position="absolute";
													sort.style.width=docWidth*.8*.9+'px';
													sort.style.height=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.1+'px';
													sort.style.left=docWidth*.8*.05+'px';
													sort.style.top=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.73+'px';
													sort.innerHTML="<option value='null'>Sort By:</option><option value='legendary'>Legendary</option><option value='popular'>Popular</option><option value='trending'>Trending Now</option><option value='recent'>Most Recent</option><option value='controversial'>Mixed Ratings</option>";
													
													handleDOM.create("submitSettings", "INPUT", feedPost);
													var submitSettings=document.getElementById("submitSettings");
													submitSettings.type="button";
													submitSettings.style.position="absolute";
													submitSettings.style.maxWidth=docWidth*.8*.7+'px';
													submitSettings.style.width=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.3+'px';
													submitSettings.style.height=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.1+'px';
													submitSettings.style.left=(docWidth*.8-$('#submitSettings').width())/2+'px';
													submitSettings.style.top=((docHeight-((docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1)-(picW*docWidth))*.9)*.87+'px';
													submitSettings.value="Submit";
													submitSettings.onclick=function(){
														//submit settings to db here==================
														var hr = new XMLHttpRequest();
														var url= "http://strugglingdev-games.com/editSettings.php";
														var vars = "settings="+sort.value;
														if(anonsBox.checked==true){
															vars+=",anon";
														}
														else{
															vars+=",null";
														}
														if(friendsBox.checked==true){
															vars+=",friends";
														}
														else{
															vars+=",null";
														}
														if(publicsBox.checked==true){
															vars+=",public";
														}
														else{
															vars+=",null";
														}
														if(favsBox.checked==true){
															vars+=",favorites";
														}
														else{
															vars+=",null";
														}
														if(sort.value!="null" && (favsBox.checked==true || publicsBox.checked==true || friendsBox.checked==true || anonsBox.checked==true)){
															hr.open("POST", url, true);
															hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
															hr.onreadystatechange = function(){
																if(hr.readyState==4 && hr.status==200){
																	var return_data=hr.responseText;
																	submitSettings.value="Success!";
																	setTimeout(function(){
																		feedPosition=0;
																		feedSlide();
																	}, 500);
																}
															}
															hr.send(vars);
															submitSettings.value="Submitting...";
														}
														else if(sort.value=="null"){
															alert("Choose a sort method.")
														}
														else{
															alert("Include at least one type of post.");
														}
													}
												}
											else if(didSwipe){
												feedTitle.innerHTML="&nbspBlurbs";//type
												feedPost.innerHTML=null;
												
												//populate feed with data
												var populate=function(){
													if(feedContentData[feedPosition]){
														handleDOM.create("previewIMG", "IMG", feedPost);
														var previewIMG=document.getElementById("previewIMG");
														previewIMG.src="img/profile.jpg";
														previewIMG.style.position="absolute";
														previewIMG.style.width=docWidth*.8*.3+'px';
														previewIMG.style.height=docWidth*.8*.3+'px';
														previewIMG.style.left=docWidth*.8*.05+'px';
														previewIMG.style.top=docWidth*.8*.05+'px';
														
														var voteCounter=feedUpVotesData[feedPosition]-feedDownVotesData[feedPosition];
														
														handleDOM.create("upVote", "IMG", feedPost);
														var upVote=document.getElementById("upVote");
														if(feedUpVotedData[feedPosition]==1){
															upVote.src="img/upVoteClicked.png";
														}
														else{
															upVote.src="img/upVote.png";
														}
														upVote.style.position="absolute";
														upVote.style.width=docWidth*.8*.1+'px';
														upVote.style.height=docWidth*.8*.1+'px';
														upVote.style.left=docWidth*.8*.4+'px';
														upVote.style.top=docWidth*.8*.05+'px';
														upVote.onclick=function(){
															upVote.src="img/upVoteClicked.png";
															downVote.src="img/downVote.png";
															
															//call PHP file to read in feed settings and data
															var hr = new XMLHttpRequest();
															var url= "http://strugglingdev-games.com/affectVote.php";
															var loadSend = loadedAt-1;
															var data = "data=up&id="+em+"&postId="+feedIdData[feedPosition];
															hr.open("POST", url, true);
															hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
															hr.onreadystatechange = function(){
																if(hr.readyState==4 && hr.status==200){
																	data=hr.responseText;
																	var returned=data.split(",");
																	if(returned[0]!="alreadyVoted"){
																		feedUpVotesData[feedPosition]=returned[0];
																		feedDownVotesData[feedPosition]=returned[1];
																		feedUpVotedData[feedPosition]=1;
																		upVote.src="img/upVoteClicked.png";
																		voteCounter=feedUpVotesData[feedPosition]-feedDownVotesData[feedPosition];
																		voteCount.innerHTML=voteCounter;
																	}
																	else{
																		feedUpVotesData[feedPosition]=returned[1];
																		feedDownVotesData[feedPosition]=returned[2];
																		feedUpVotedData[feedPosition]=0;
																		upVote.src="img/upVote.png";
																		voteCounter=feedUpVotesData[feedPosition]-feedDownVotesData[feedPosition];
																		voteCount.innerHTML=voteCounter;
																	}
																	
																	if(voteCounter<0){
																		voteCount.style.color="#FF0000";
																	}
																	else{
																		voteCount.style.color="#00FF00";
																	}
																}
															}
															
															voteCount.innerHTML="<img src='img/loading.gif'/>";
															
															hr.send(data);
														};
														
														handleDOM.create("voteCount", "DIV", feedPost);
														var voteCount=document.getElementById("voteCount");
														voteCount.style.position="absolute";
														voteCount.style.width=docWidth*.8*.1+'px';
														voteCount.style.height=docWidth*.8*.1+'px';
														voteCount.style.left=docWidth*.8*.4+'px';
														voteCount.style.top=docWidth*.8*.15+'px';
														voteCount.style.fontSize=docWidth*.8*.1+'px';
														if(voteCounter<0){
															voteCount.style.color="#FF0000";
														}
														else{
															voteCount.style.color="#00FF00";
														}
														voteCount.innerHTML=voteCounter;
														
														handleDOM.create("downVote", "IMG", feedPost);
														var downVote=document.getElementById("downVote");
														if(feedDownVotedData[feedPosition]==1){
															downVote.src="img/downVoteClicked.png";
														}
														else{
															downVote.src="img/downVote.png";
														}
														downVote.style.position="absolute";
														downVote.style.width=docWidth*.8*.1+'px';
														downVote.style.height=docWidth*.8*.1+'px';
														downVote.style.left=docWidth*.8*.4+'px';
														downVote.style.top=docWidth*.8*.25+'px';
														downVote.onclick=function(){
															upVote.src="img/upVote.png";
															downVote.src="img/downVoteClicked.png";
															
															//call PHP file to read in feed settings and data
															var hr = new XMLHttpRequest();
															var url= "http://strugglingdev-games.com/affectVote.php";
															var loadSend = loadedAt-1;
															var data = "data=down&id="+em+"&postId="+feedIdData[feedPosition];
															hr.open("POST", url, true);
															hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
															hr.onreadystatechange = function(){
																data=hr.responseText;
																var returned=data.split(",");
																if(returned[0]!="alreadyVoted"){
																	feedUpVotesData[feedPosition]=returned[0];
																	feedDownVotesData[feedPosition]=returned[1];
																	feedDownVotedData[feedPosition]=1;
																	downVote.src="img/downVoteClicked.png";
																	voteCounter=feedUpVotesData[feedPosition]-feedDownVotesData[feedPosition];
																	voteCount.innerHTML=voteCounter;
																}
																else{
																	feedUpVotesData[feedPosition]=returned[1];
																	feedDownVotesData[feedPosition]=returned[2];
																	feedDownVotedData[feedPosition]=0;
																	downVote.src="img/downVote.png";
																	voteCounter=feedUpVotesData[feedPosition]-feedDownVotesData[feedPosition];
																	voteCount.innerHTML=voteCounter;
																}
																
																if(voteCounter<0){
																	voteCount.style.color="#FF0000";
																}
																else{
																	voteCount.style.color="#00FF00";
																}
															}
															
															voteCount.innerHTML="<img src='img/loading.gif'/>";
															
															hr.send(data);
														};
														
														
														handleDOM.create("addFav", "IMG", feedPost);
														var addFav=document.getElementById("addFav");
														if(feedFavoritedData[feedPosition]==1){
															addFav.src="img/addedFavorite.png";
														}
														else{
															addFav.src="img/addFavorite.png";
														}
														addFav.style.position="absolute";
														addFav.style.width=docWidth*.8*.1+'px';
														addFav.style.height=docWidth*.8*.1+'px';
														addFav.style.left=docWidth*.8*.8+'px';
														addFav.style.top=docWidth*.8*.05+'px';
														addFav.onclick=function(){
															var hr = new XMLHttpRequest();
															var url= "http://strugglingdev-games.com/addFavorite.php";
															var loadSend = loadedAt-1;
															var data = "id="+em+"&postId="+feedIdData[feedPosition];
															hr.open("POST", url, true);
															hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
															hr.onreadystatechange = function(){
																if(hr.readyState==4 && hr.status==200){
																	data = hr.responseText;
																	if(data==1){
																		addFav.src="img/addedFavorite.png";
																	}
																	else if(data==2){
																		addFav.src="img/addFavorite.png";
																	}
																}
															}
															addFav.src="img/loading.gif";
															hr.send(data);
														}
														
														handleDOM.create("comments", "IMG", feedPost);
														var comments=document.getElementById("comments");
														comments.src="img/comments.png";
														comments.style.position="absolute";
														comments.style.width=docWidth*.8*.1+'px';
														comments.style.height=docWidth*.8*.1+'px';
														comments.style.left=docWidth*.8*.8+'px';
														comments.style.top=docWidth*.8*.25+'px';
														comments.onclick=function(){
															alert("Comments not yet implemented.");
														}
														
														handleDOM.create("postContent", "DIV", feedPost);
														var postContent=document.getElementById("postContent");
														postContent.style.visibility="visible";
														postContent.style.fontSize=docWidth*.8*.059+'px';
														postContent.style.position="absolute";
														postContent.style.width=docWidth*.8*.9+'px';
														postContent.style.minHeight=docWidth*.8*.7+'px';
														postContent.style.left=docWidth*.8*.05+'px';
														postContent.style.top=docWidth*.8*.4+'px';
														postContent.style.marginBottom=docWidth*.8*.05;
														postContent.style.wordWrap="break-word";
														postContent.innerHTML=feedContentData[feedPosition];
														
														handleDOM.create("footer", "DIV", feedPost);
														var footer=document.getElementById("footer");
														footer.style.position="absolute";
														footer.style.width=docWidth*.8*.8+'px';
														footer.style.height=docWidth*.8*.08+'px';
														footer.style.left=docWidth*.8*.1+'px';
														footer.style.top=$('#feedPost').height()+docWidth*.8*.01+'px';
														footer.style.fontSize=docWidth*.8*.059+'px';
														footer.innerHTML="<b>"+feedCreatorData[feedPosition]+"</b><br>"+feedDateData[feedPosition];
														
													}
												}
												if(!loaded){
													//call PHP file to read in feed settings and data
													var hr = new XMLHttpRequest();
													var url= "http://strugglingdev-games.com/populateFeed.php";
													var loadSend = loadedAt-1;
													var data = "data=stories&offset="+loadSend+"&type="+type+"&id="+em;
													hr.open("POST", url, true);
													hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
													hr.onreadystatechange = function(){	
														if(hr.readyState==4 && hr.status==200){
															data=hr.responseText;
															console.log(data);
															//populate JS data with query result
															feedData=data.split("+");
															for(var i=0; i<15; i++){
																if(feedData[i]){
																	var splitter=feedData[i].split(",");
																	feedIdData[i+loadedAt]=splitter[0];
																	feedTypeData[i+loadedAt]=splitter[1];
																	feedContentData[i+loadedAt]=splitter[9];
																	feedDateData[i+loadedAt]=splitter[3];
																	feedCreatorData[i+loadedAt]=splitter[2];
																	feedUpVotesData[i+loadedAt]=splitter[4];
																	feedDownVotesData[i+loadedAt]=splitter[5];
																	feedUpVotedData[i+loadedAt]=splitter[6];
																	feedDownVotedData[i+loadedAt]=splitter[7];
																	feedFavoritedData[i+loadedAt]=splitter[8];
																	//for(var i=10; splitter[i]; i++){
																	//	feedContentData[i+loadedAt]=splitter[i];
																	//}
																}
																else{
																	feedContentData[i+loadedAt]="You've reached the edge of the abyss, kid.<br>There's nowhere else to go; better start over and see what's new.";
																	feedCreatorData[i+loadedAt]="Mr. Anonymous";
																	feedDateData[i+loadedAt]="March 12, 1885";
																}
															}
															populate();
														}
													}
													hr.send(data);
												}
												else{
													populate();
												}
												
											}
										}
										feedSlide();
										moved=false;
									}, false);
									
									back.onclick=function(){
										handleDOM.remove("feedTitle");
										handleDOM.remove("feedPost");
										
										storyOptions();
									};
									
									
								};
								
								var confessionsOn=false;
								var funnyOn=false;
								var interestingOn=false;
								var scaryOn=false;
								var sexyOn=false;
								var randomOn=false;
								
								//create different story options
								handleDOM.create("newStory", "IMG", feed);
								var newStory=document.getElementById("newStory");
								newStory.src="img/new.png";
								newStory.style.position="absolute";
								newStory.style.left=(docWidth-(docHeight-(docWidth*picW))*.1)/2+'px';
								newStory.style.top=(docHeight-(docWidth*picW))*(1/8)*.3+'px';
								newStory.style.width=(docHeight-(docWidth*picW))*.1+'px';
								newStory.style.height=(docHeight-(docWidth*picW))*.1+'px';
								newStory.onclick=function(){createStory();};
								
								handleDOM.create("goStories", "IMG", feed);
								var goStories=document.getElementById("goStories");
								goStories.style.position="absolute";
								goStories.style.left=(docWidth-(docHeight-(docWidth*picW))*.1)*.8+'px';
								goStories.style.top=(docHeight-(docWidth*picW))*(1/8)*.3+'px';
								goStories.style.width=(docHeight-(docWidth*picW))*.2+'px';
								goStories.style.height=(docHeight-(docWidth*picW))*.1+'px';
								
								var checkGo=function(){
									if(!confessionsOn&&!funnyOn&&!interestingOn&&!scaryOn&&!sexyOn&&!randomOn){
										goStories.onclick=function(){alert("Select at least one category.");};
										goStories.src="img/goNull.png";
									}
									else{
										var typeCode=0;
										if(confessionsOn){
											typeCode+=1;
										}
										if(funnyOn){
											typeCode+=10;
										}
										if(interestingOn){
											typeCode+=100;
										}
										if(scaryOn){
											typeCode+=1000;
										}
										if(sexyOn){
											typeCode+=10000;
										}
										if(randomOn){
											typeCode+=100000;
										}
										goStories.onclick=function(){rollFeed(typeCode);};
										goStories.src="img/go.png";
									}
								}
								checkGo();
								
								handleDOM.create("confessions", "DIV", feed);
								var confessions=document.getElementById("confessions");
								confessions.style.fontSize=fontW*2+'px';
								confessions.innerHTML="&nbspConfessions";
								confessions.style.position="absolute";
								confessions.style.left=docWidth*.1+'px';
								confessions.style.top=(docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1+'px';
								confessions.style.width=docWidth*.8+'px';
								confessions.style.height=(docHeight-(docWidth*picW))*.1+'px';
								confessions.style.verticalAlign="middle";
								confessions.style.backgroundColor="#990033";
								confessions.style.color="#FBB310";
								
								handleDOM.create("confessionsButton", "IMG", feed);
								var confessionsButton=document.getElementById("confessionsButton");
								confessionsButton.style.position="absolute";
								confessionsButton.style.right=docWidth*.1+'px';
								confessionsButton.style.top=(docHeight-(docWidth*picW))*(2/8)*.3+(docHeight-(docWidth*picW))*.1+'px';
								confessionsButton.style.width=docWidth*.2+'px';
								confessionsButton.style.height=(docHeight-(docWidth*picW))*.1+'px';
								confessions.onclick=function(){
									if(confessionsOn){
										confessionsOn=false;
										confessionsButton.src="img/confessionOff.png";
									}
									else{
										confessionsOn=true;
										confessionsButton.src="img/confessionOn.png";
									}
									checkGo();
								}
								confessionsButton.onclick=function(){
									if(confessionsOn){
										confessionsOn=false;
										confessionsButton.src="img/confessionOff.png";
									}
									else{
										confessionsOn=true;
										confessionsButton.src="img/confessionOn.png";
									}
									checkGo();
								}
								
								if(confessionsOn){
									confessionsButton.src="img/confessionOn.png";
								}
								else{
									confessionsButton.src="img/confessionOff.png";
								}
								
								handleDOM.create("funny", "DIV", feed);
								var funny=document.getElementById("funny");
								funny.style.fontSize=fontW*2+'px';
								funny.innerHTML="&nbspFunny";
								funny.style.position="absolute";
								funny.style.left=docWidth*.1+'px';
								funny.style.top=(docHeight-(docWidth*picW))*(3/8)*.3+(docHeight-(docWidth*picW))*.2+'px';
								funny.style.width=docWidth*.8+'px';
								funny.style.height=(docHeight-(docWidth*picW))*.1+'px';
								funny.style.backgroundColor="#990033";
								funny.style.color="#FBB310";
								
								handleDOM.create("funnyButton", "IMG", feed);
								var funnyButton=document.getElementById("funnyButton");
								funnyButton.style.position="absolute";
								funnyButton.style.right=docWidth*.1+'px';
								funnyButton.style.top=(docHeight-(docWidth*picW))*(3/8)*.3+(docHeight-(docWidth*picW))*.2+'px';
								funnyButton.style.width=docWidth*.2+'px';
								funnyButton.style.height=(docHeight-(docWidth*picW))*.1+'px';
								funny.onclick=function(){
									if(funnyOn){
										funnyOn=false;
										funnyButton.src="img/funnyOff.png";
									}
									else{
										funnyOn=true;
										funnyButton.src="img/funnyOn.png";
									}
									checkGo();
								}
								funnyButton.onclick=function(){
									if(funnyOn){
										funnyOn=false;
										funnyButton.src="img/funnyOff.png";
									}
									else{
										funnyOn=true;
										funnyButton.src="img/funnyOn.png";
									}
									checkGo();
								}
								
								if(funnyOn){
									funnyButton.src="img/funnyOn.png";
								}
								else{
									funnyButton.src="img/funnyOff.png";
								}
								
								handleDOM.create("interesting", "DIV", feed);
								var interesting=document.getElementById("interesting");
								interesting.style.fontSize=fontW*2+'px';
								interesting.innerHTML="&nbspInteresting";
								interesting.style.position="absolute";
								interesting.style.left=docWidth*.1+'px';
								interesting.style.top=(docHeight-(docWidth*picW))*(4/8)*.3+(docHeight-(docWidth*picW))*.3+'px';
								interesting.style.width=docWidth*.8+'px';
								interesting.style.height=(docHeight-(docWidth*picW))*.1+'px';
								interesting.style.backgroundColor="#990033";
								interesting.style.color="#FBB310";
								
								handleDOM.create("interestingButton", "IMG", feed);
								var interestingButton=document.getElementById("interestingButton");
								interestingButton.style.position="absolute";
								interestingButton.style.right=docWidth*.1+'px';
								interestingButton.style.top=(docHeight-(docWidth*picW))*(4/8)*.3+(docHeight-(docWidth*picW))*.3+'px';
								interestingButton.style.width=docWidth*.2+'px';
								interestingButton.style.height=(docHeight-(docWidth*picW))*.1+'px';
								interesting.onclick=function(){
									if(interestingOn){
										interestingOn=false;
										interestingButton.src="img/interestingOff.png";
									}
									else{
										interestingOn=true;
										interestingButton.src="img/interestingOn.png";
									}
									checkGo();
								}
								interestingButton.onclick=function(){
									if(interestingOn){
										interestingOn=false;
										interestingButton.src="img/interestingOff.png";
									}
									else{
										interestingOn=true;
										interestingButton.src="img/interestingOn.png";
									}
									checkGo();
								}
								
								if(interestingOn){
									interestingButton.src="img/interestingOn.png";
								}
								else{
									interestingButton.src="img/interestingOff.png";
								}
								
								handleDOM.create("scary", "DIV", feed);
								var scary=document.getElementById("scary");
								scary.style.fontSize=fontW*2+'px';
								scary.innerHTML="&nbspScary/Creepy";
								scary.style.position="absolute";
								scary.style.left=docWidth*.1+'px';
								scary.style.top=(docHeight-(docWidth*picW))*(5/8)*.3+(docHeight-(docWidth*picW))*.4+'px';
								scary.style.width=docWidth*.8+'px';
								scary.style.height=(docHeight-(docWidth*picW))*.1+'px';
								scary.style.backgroundColor="#990033";
								scary.style.color="#FBB310";
								
								handleDOM.create("scaryButton", "IMG", feed);
								var scaryButton=document.getElementById("scaryButton");
								scaryButton.style.position="absolute";
								scaryButton.style.right=docWidth*.1+'px';
								scaryButton.style.top=(docHeight-(docWidth*picW))*(5/8)*.3+(docHeight-(docWidth*picW))*.4+'px';
								scaryButton.style.width=docWidth*.2+'px';
								scaryButton.style.height=(docHeight-(docWidth*picW))*.1+'px';
								scary.onclick=function(){
									if(scaryOn){
										scaryOn=false;
										scaryButton.src="img/scaryOff.png";
									}
									else{
										scaryOn=true;
										scaryButton.src="img/scaryOn.png";
									}
									checkGo();
								}
								scaryButton.onclick=function(){
									if(scaryOn){
										scaryOn=false;
										scaryButton.src="img/scaryOff.png";
									}
									else{
										scaryOn=true;
										scaryButton.src="img/scaryOn.png";
									}
									checkGo();
								}
								
								if(scaryOn){
									scaryButton.src="img/scaryOn.png";
								}
								else{
									scaryButton.src="img/scaryOff.png";
								}
								
								handleDOM.create("sexy", "DIV", feed);
								var sexy=document.getElementById("sexy");
								sexy.style.fontSize=fontW*2+'px';
								sexy.innerHTML="&nbspSexy";
								sexy.style.position="absolute";
								sexy.style.left=docWidth*.1+'px';
								sexy.style.top=(docHeight-(docWidth*picW))*(6/8)*.3+(docHeight-(docWidth*picW))*.5+'px';
								sexy.style.width=docWidth*.8+'px';
								sexy.style.height=(docHeight-(docWidth*picW))*.1+'px';
								sexy.style.backgroundColor="#990033";
								sexy.style.color="#FBB310";
								
								handleDOM.create("sexyButton", "IMG", feed);
								var sexyButton=document.getElementById("sexyButton");
								sexyButton.style.position="absolute";
								sexyButton.style.right=docWidth*.1+'px';
								sexyButton.style.top=(docHeight-(docWidth*picW))*(6/8)*.3+(docHeight-(docWidth*picW))*.5+'px';
								sexyButton.style.width=docWidth*.2+'px';
								sexyButton.style.height=(docHeight-(docWidth*picW))*.1+'px';
								sexy.onclick=function(){
									if(sexyOn){
										sexyOn=false;
										sexyButton.src="img/sexyOff.png";
									}
									else{
										sexyOn=true;
										sexyButton.src="img/sexyOn.png";
									}
									checkGo();
								}
								sexyButton.onclick=function(){
									if(sexyOn){
										sexyOn=false;
										sexyButton.src="img/sexyOff.png";
									}
									else{
										sexyOn=true;
										sexyButton.src="img/sexyOn.png";
									}
									checkGo();
								}
								
								if(sexyOn){
									sexyButton.src="img/sexyOn.png";
								}
								else{
									sexyButton.src="img/sexyOff.png";
								}
								
								handleDOM.create("random", "DIV", feed);
								var random=document.getElementById("random");
								random.style.fontSize=fontW*2+'px';
								random.innerHTML="&nbspRandom/Other";
								random.style.position="absolute";
								random.style.left=docWidth*.1+'px';
								random.style.top=(docHeight-(docWidth*picW))*(7/8)*.3+(docHeight-(docWidth*picW))*.6+'px';
								random.style.width=docWidth*.8+'px';
								random.style.height=(docHeight-(docWidth*picW))*.1+'px';
								random.style.backgroundColor="#990033";
								random.style.color="#FBB310";
								
								handleDOM.create("randomButton", "IMG", feed);
								var randomButton=document.getElementById("randomButton");
								randomButton.style.position="absolute";
								randomButton.style.right=docWidth*.1+'px';
								randomButton.style.top=(docHeight-(docWidth*picW))*(7/8)*.3+(docHeight-(docWidth*picW))*.6+'px';
								randomButton.style.width=docWidth*.2+'px';
								randomButton.style.height=(docHeight-(docWidth*picW))*.1+'px';
								random.onclick=function(){
									if(randomOn){
										randomOn=false;
										randomButton.src="img/randomOff.png";
									}
									else{
										randomOn=true;
										randomButton.src="img/randomOn.png";
									}
									checkGo();
								}
								randomButton.onclick=function(){
									if(randomOn){
										randomOn=false;
										randomButton.src="img/randomOff.png";
									}
									else{
										randomOn=true;
										randomButton.src="img/randomOn.png";
									}
									checkGo();
								}
								
								if(randomOn){
									randomButton.src="img/randomOn.png";
								}
								else{
									randomButton.src="img/randomOff.png";
								}
								
							}
						
				//=========activities feed=========================================
						handleDOM.create("activities", "DIV", feed);
						var activities=document.getElementById("activities");
						activities.style.position="absolute";
						activities.style.left=docWidth*.5+'px';
						activities.style.top=0+'px';
						activities.style.width=docWidth*.5-1+'px';
						activities.style.height=(docHeight-(picW*docWidth))*.5-1+'px';
						activities.style.borderLeft="1px solid #990033";
						activities.style.borderBottom="1px solid #990033";
						
							handleDOM.create("activitiesImg", "IMG", activities);
							var activitiesImg=document.getElementById("activitiesImg");
							activitiesImg.src="img/activitiesImg.png";
							activitiesImg.style.position="absolute";
							activitiesImg.style.left=docWidth*.5*.1+'px';
							activitiesImg.style.top=(docHeight-(picW*docWidth))*.5*.1+'px';
							activitiesImg.style.width=docWidth*.5*.8+'px';
							activitiesImg.style.height=(docHeight-(picW*docWidth))*.5*.8+'px';
							
				//========meet feed================================================
						handleDOM.create("meet", "DIV", feed);
						var meet=document.getElementById("meet");
						meet.style.position="absolute";
						meet.style.left=0+'px';
						meet.style.top=(docHeight-(picW*docWidth))*.5+'px';
						meet.style.width=docWidth*.5-1+'px';
						meet.style.height=(docHeight-(picW*docWidth))*.5-1+'px';
						meet.style.borderRight="1px solid #990033";
						meet.style.borderTop="1px solid #990033";
						
							handleDOM.create("meetImg", "IMG", meet);
							var meetImg=document.getElementById("meetImg");
							meetImg.src="img/meetImg.png";
							meetImg.style.position="absolute";
							meetImg.style.left=docWidth*.5*.1+'px';
							meetImg.style.top=(docHeight-(picW*docWidth))*.5*.1+'px';
							meetImg.style.width=docWidth*.5*.8+'px';
							meetImg.style.height=(docHeight-(picW*docWidth))*.5*.8+'px';
						
				//=======circles feed==============================================
						handleDOM.create("circles", "DIV", feed);
						var circles=document.getElementById("circles");
						circles.style.position="absolute";
						circles.style.left=docWidth*.5+'px';
						circles.style.top=(docHeight-(picW*docWidth))*.5+'px';
						circles.style.width=docWidth*.5-1+'px';
						circles.style.height=(docHeight-(picW*docWidth))*.5-1+'px';
						circles.style.borderLeft="1px solid #990033";
						circles.style.borderTop="1px solid #990033";
						
							handleDOM.create("circlesImg", "IMG", circles);
							var circlesImg=document.getElementById("circlesImg");
							circlesImg.src="img/circlesImg.png";
							circlesImg.style.position="absolute";
							circlesImg.style.left=docWidth*.5*.1+'px';
							circlesImg.style.top=(docHeight-(picW*docWidth))*.5*.1+'px';
							circlesImg.style.width=docWidth*.5*.8+'px';
							circlesImg.style.height=(docHeight-(picW*docWidth))*.5*.8+'px';
				
				//re-verify login credentials
			},
		
		//==================circles page=============================
			circle: function(em, pw){
				//draw main screen
					//slide function
				var current=docWidth;
				var slideLeft = function(){
					setTimeout(function(){
						if(current>0){
							current -=slider;
							if(current<=picW*docWidth){
								profileImg.style.left=0+'px';
							}
							else{
								profileImg.style.left=(current-(docWidth*picW))+'px';
							}
							banner.style.left=(current-(docWidth*.9))+'px';
							search.style.left=(current-docWidth)+'px';
							circles.style.left=(current-(docWidth))+'px';
							buttons.style.left=(current-(docWidth*picW))+'px';
							slideLeft();
						}
						else if(current <= 0){
							handleDOM.remove("settings");
							handleDOM.remove("newCircle");
							handleDOM.remove("newPic");
							handleDOM.remove("help");
							handleDOM.remove("buttons");
							
							handleDOM.remove("banner");
							
							handleDOM.remove("circles");
							page.main(em, pw);
						}
					}, 20);
				}
				var slideRight3 = function(){
					setTimeout(function(){
						if(current>=docWidth+(docWidth*picW)){
							handleDOM.remove("searchIcon");
							search.style.width=docWidth+'px';
							page.search(em, pw);
						}
						else{
							current+=slider/2;
							search.style.left=0+'px';
							search.style.width=current-(picW*docWidth)+'px';
							slideRight3();
						}
					}, 20);
				}
				
					//create picture
				var picW=.35;
				handleDOM.create("profileImg", "IMG", king);
				var profileImg=document.getElementById("profileImg");
				profileImg.style.position="fixed";
				profileImg.style.width=picW*docWidth+'px';
				profileImg.style.height=picW*docWidth+'px';
				profileImg.style.left=docWidth-(picW*docWidth)+'px';
				profileImg.onclick=function(){slideLeft();};
				
					//create circles
				handleDOM.create("circles", "DIV", king);
				var circles = document.getElementById("circles");
				circles.style.position="absolute";
				circles.style.width=docWidth-(picW*docWidth)-6+'px';
				circles.style.minHeight=docHeight-(docWidth*picW/2)+'px';
				circles.style.left=0+'px';
				circles.style.top=docWidth*picW/2+'px';
				circles.style.borderBottom="5px solid #990033";
				circles.style.borderRight="5px solid #990033";
				circles.style.backgroundColor="#A4A4A4";
						//retrieve group list data and display
					var n=100;
					for(var i=0; i<n; i++){
						handleDOM.create("circle"+i, "DIV", circles);
						var circle = document.getElementById("circle"+i);
						//constants
						circle.style.position="absolute";
						circle.style.width=(docWidth-(picW*docWidth)-5)*.9+'px';
						circle.style.height=((docWidth-(picW*docWidth)-5)*.9)/2.2+'px';
						circle.style.left=(docWidth-(picW*docWidth)-5)*.05-2+'px';
						circle.style.border="2px solid #990033";
						circle.style.backgroundColor="black";
						//variables
						circle.style.top=i*(((docWidth-(picW*docWidth)-5)*.9)/2.2)+(((docWidth-(picW*docWidth)-5)*.05-2)*2*(i+1))+'px';
					}
					circles.style.height=(n)*(((docWidth-(picW*docWidth)-5)*.9)/2.2)+(((docWidth-(picW*docWidth)-5)*.05-2)*2*(n+1))+'px';
					
		
					//header banner
				handleDOM.create("banner", "DIV", king);
				var banner = document.getElementById("banner");
				banner.style.position="fixed";
				banner.style.width=docWidth*.9-(picW*docWidth)-3+'px';
				banner.style.height=docWidth*picW/2+'px';
				banner.style.left=docWidth*.1+3+'px';
				banner.style.top=0+'px';
				banner.style.backgroundColor="#990033";
						//search my circles button
					handleDOM.create("searchCircles", "INPUT", banner);
					var searchCircles = document.getElementById("searchCircles");
					searchCircles.type="button";
					searchCircles.style.position="absolute";
					searchCircles.style.left=(docWidth*.9-(picW*docWidth)-3)*.1+'px';
					searchCircles.style.top=.1*docWidth*picW/2+'px';
					searchCircles.style.width=(docWidth*.9-(picW*docWidth)-3)*.8+'px';
					searchCircles.style.height=(docWidth*picW/2)*.8+'px';
					searchCircles.value="Search My Circles";
					searchCircles.style.color="#990033";
					searchCircles.style.border="3px solid #FBB310";
					searchCircles.style.backgroundColor="white";
					searchCircles.style.padding="8px";
					searchCircles.style.borderRadius=2*fontW+"px";
					searchCircles.style.fontSize=fontW+"px";
					searchCircles.style.fontWeight="bold";
					searchCircles.style.fontFamily="helvetica, serif";
					searchCircles.style.verticalAlign="middle";
					
					//delete and recreate search div
				if(document.getElementById("searchIcon")){
					handleDOM.remove("searchIcon");
				}
				if(document.getElementById("search")){
					handleDOM.remove("search");
				}
				
				handleDOM.create("search", "DIV", king)
				var search = document.getElementById("search");
				search.style.position="fixed";
				search.style.height=docWidth*picW/2+'px';
				search.style.width=docWidth*.1+'px';
				search.style.top=0+'px';
				search.style.left=0+'px';
				search.style.borderRight="3px solid black";
				search.style.backgroundColor="#990033";
						//pull up search img
						handleDOM.create("searchIcon", "IMG", search);
						var searchIcon=document.getElementById("searchIcon");
						searchIcon.src="img/search.png";
						searchIcon.style.position="relative";
						searchIcon.style.width=.08*docWidth+'px';
						searchIcon.style.height=((picW/2)-.1)*docWidth +'px';
						searchIcon.style.left=.01*docWidth+'px';
						searchIcon.style.top=((docWidth*picW/2)-((picW/2)-.1)*docWidth)/2 +'px';
						searchIcon.onclick=function(){
							handleDOM.remove("searchCircles");
							handleDOM.remove("banner");
							
							handleDOM.remove("profileImg");
							
							handleDOM.remove("newCircle");
							handleDOM.remove("settings");
							handleDOM.remove("newPic");
							handleDOM.remove("help");
							handleDOM.remove("buttons");
							
			//-----------------//remove each individual circle as well//-------------//
							handleDOM.remove("circles");
							
							search.style.position="absolute";
							slideRight3();
						};
					
					//create buttons
				handleDOM.create("buttons", "DIV", king);
				var buttons = document.getElementById("buttons");
				buttons.style.position="fixed";
				buttons.style.width=(picW*docWidth)+'px';
				buttons.style.height=docHeight-(picW*docWidth)+'px';
				buttons.style.left=docWidth-(docWidth*picW)+'px';
				buttons.style.top=(docWidth*picW)+'px';
				buttons.style.backgroundColor="black";
						
						//create circle button
						handleDOM.create("newCircle", "IMG", buttons);
						var newCircle=document.getElementById("newCircle");
						newCircle.src="img/new.png";
						newCircle.style.position="absolute";
						newCircle.onclick=function(){
							handleDOM.remove("searchCircles");
							handleDOM.remove("banner");
							
							handleDOM.remove("profileImg");
							
							handleDOM.remove("newCircle");
							handleDOM.remove("settings");
							handleDOM.remove("newPic");
							handleDOM.remove("help");
							handleDOM.remove("buttons");
							
							handleDOM.remove("circles");
							
							handleDOM.remove("searchIcon");
							handleDOM.remove("search");
							page.newCircle(em, pw);
						};
						
						//settings button
						handleDOM.create("settings", "IMG", buttons);
						var settings=document.getElementById("settings");
						settings.src="img/settings.png";
						settings.style.position="absolute";
						settings.onclick=function(){
							handleDOM.remove("searchCircles");
							handleDOM.remove("banner");
							
							handleDOM.remove("profileImg");
							
							handleDOM.remove("newCircle");
							handleDOM.remove("settings");
							handleDOM.remove("newPic");
							handleDOM.remove("help");
							handleDOM.remove("buttons");
							
							handleDOM.remove("circles");
							
							handleDOM.remove("searchIcon");
							handleDOM.remove("search");
							page.settings(em, pw);
						};
						
						//change profile picture button
						handleDOM.create("newPic", "IMG", buttons);
						var newPic=document.getElementById("newPic");
						newPic.src="img/newPic.png";
						newPic.style.position="absolute";
						newPic.onclick=function(){
							handleDOM.remove("searchCircles");
							handleDOM.remove("banner");
							
							handleDOM.remove("profileImg");
							
							handleDOM.remove("newCircle");
							handleDOM.remove("settings");
							handleDOM.remove("newPic");
							handleDOM.remove("help");
							handleDOM.remove("buttons");
							
							handleDOM.remove("circles");
							
							handleDOM.remove("searchIcon");
							handleDOM.remove("search");
							page.newPic(em, pw);
						};
						
						//help button
						handleDOM.create("help", "IMG", buttons);
						var help=document.getElementById("help");
						help.src="img/help.png";
						help.style.position="absolute";
						help.onclick=function(){
							handleDOM.remove("searchCircles");
							handleDOM.remove("banner");
							
							handleDOM.remove("profileImg");
							
							handleDOM.remove("newCircle");
							handleDOM.remove("settings");
							handleDOM.remove("newPic");
							handleDOM.remove("help");
							handleDOM.remove("buttons");
							
							handleDOM.remove("circles");
							
							handleDOM.remove("searchIcon");
							handleDOM.remove("search");
							page.help(em, pw);
						};
						
						//set button divs dimensions and coordinates based upon screen ratio
						if((docHeight-(docWidth*picW))/5<=docWidth*picW*.66){
							newCircle.style.left=((picW*docWidth)-((docHeight-(docWidth*picW))/5))/2+'px';
							newCircle.style.top=(docHeight-(picW*docWidth))*.04+'px';
							newCircle.style.width=(docHeight-(docWidth*picW))/5+'px';
							newCircle.style.height=(docHeight-(docWidth*picW))/5+'px';
						
							settings.style.left=((picW*docWidth)-((docHeight-(docWidth*picW))/5))/2+'px';
							settings.style.top=(docHeight-(picW*docWidth))*.08+(docHeight-(docWidth*picW))/5+'px';
							settings.style.width=(docHeight-(docWidth*picW))/5+'px';
							settings.style.height=(docHeight-(docWidth*picW))/5+'px';

							newPic.style.left=((picW*docWidth)-((docHeight-(docWidth*picW))/5))/2+'px';
							newPic.style.top=(docHeight-(picW*docWidth))*.12+(docHeight-(docWidth*picW))*2/5+'px';
							newPic.style.width=(docHeight-(docWidth*picW))/5+'px';
							newPic.style.height=(docHeight-(docWidth*picW))/5+'px';
						
							help.style.left=((picW*docWidth)-((docHeight-(docWidth*picW))/5))/2+'px';
							help.style.top=(docHeight-(picW*docWidth))*.16+(docHeight-(docWidth*picW))*3/5+'px';
							help.style.width=(docHeight-(docWidth*picW))/5+'px';
							help.style.height=(docHeight-(docWidth*picW))/5+'px';
						}
						else{
							newCircle.style.left=docWidth*picW*.16+'px';
							newCircle.style.top=((docHeight-(docWidth*picW))-(docWidth*picW*.66)*4)/5+'px';
							newCircle.style.width=docWidth*picW*.66+'px';
							newCircle.style.height=docWidth*picW*.66+'px';
						
							settings.style.left=docWidth*picW*.16+'px';
							settings.style.top=((docHeight-(docWidth*picW))-(docWidth*picW*.66)*4)*2/5+(docWidth*picW*.66)+'px';
							settings.style.width=docWidth*picW*.66+'px';
							settings.style.height=docWidth*picW*.66+'px';

							newPic.style.left=docWidth*picW*.16+'px';
							newPic.style.top=((docHeight-(docWidth*picW))-(docWidth*picW*.66)*4)*3/5+(docWidth*picW*.66*2)+'px';
							newPic.style.width=docWidth*picW*.66+'px';
							newPic.style.height=docWidth*picW*.66+'px';
						
							help.style.left=docWidth*picW*.16+'px';
							help.style.top=((docHeight-(docWidth*picW))-(docWidth*picW*.66)*4)*4/5+(docWidth*picW*.66*3)+'px';
							help.style.width=docWidth*picW*.66+'px';
							help.style.height=docWidth*picW*.66+'px';
						
						}
			
						
			},
		
		//===================search page=============================
			search: function(em, pw){
				//slide function
				var picW=.225;
				var currentR=0;
				var slideRight2 = function(){
						setTimeout(function(){
							if(currentR<docWidth){
								currentR +=slider;
								if(currentR>.9*docWidth){
									search.style.left=.9*docWidth+'px';
									search.style.width=.1*docWidth+'px';
								}
								else{
									search.style.left=currentR+'px';
									search.style.width=docWidth-currentR+'px';
								}
								slideRight2();
							}
							else if(currentR >= docWidth){
								handleDOM.remove("back");
								page.main(em, pw);
							}
						}, 20);
					}
					
				//pull up search div and create for back button
				var search=document.getElementById("search");
				search.style.height=picW*docWidth+'px';
					handleDOM.create("back", "IMG", search)
					var back=document.getElementById("back");
					back.src="img/back.png";
					back.style.position="relative";
					back.style.width=.075*docWidth+'px';
					back.style.height=.075*docWidth+'px';
					back.style.left=.02*docWidth+'px';
					back.style.top=((picW*docWidth)-(.075*docWidth))*2/5+'px';
					back.onclick=function(){slideRight2()};
			},
		
		//====================create new circle page==================
			newCircle: function(em, pw){
				//=========group object==========
				var circle ={
					name:null,
					img:null,
					
					locked:null,
					
					type:null
					
				}
				
				//questions about the group
				handleDOM.create("form", "FORM", king);
				var form=document.getElementById("form");
				form.style.position="absolute";
				form.style.left=docWidth*.15+'px';
				form.style.top=docWidth*.15+'px';
				form.style.width = docWidth*.5+'px';
				form.style.padding = docWidth*.1+'px';
				form.style.border=.015*docWidth +"px solid #990033";
				
					handleDOM.create("question", "DIV", form);
					var question=document.getElementById("question");
					question.style.color="white";
					question.innerHTML="Is your Circle open for anyone in the public to join, or members only/join by request?<br>";
					
					handleDOM.create("answer", "SELECT", form);
					var answer=document.getElementById("answer");
					answer.innerHTML="<option value='public'>Public</option><option value='private'>Private</option><br>";
					
					handleDOM.create("submit", "INPUT", form);
					var submit= document.getElementById("submit");
					submit.type="button";
					submit.value="Submit";
					
					handleDOM.create("cancel", "INPUT", form);
					var cancel = document.getElementById("cancel");
					cancel.type="button";
					cancel.value="Cancel";
					cancel.onclick=function(){
						handleDOM.remove("cancel");
						handleDOM.remove("submit");
						handleDOM.remove("answer");
						handleDOM.remove("question");
						handleDOM.remove("form");
						page.circle(em, pw);
					}
					

					submit.onclick=function(){
					
						circle.locked=answer.value;
						
						question.innerHTML="What type of group is your new Circle?<br>";
						answer.innerHTML="<option value='academic'>Academic</option><option value='artistic'>Artistic</option><option value='atheletic'>Athletic</option><option value='business'>Business</option><option value='family'>Family</option><option value='gaming>Gaming</option><option value='social'>Social</option><br>";
						submit.onclick=function(){
							handleDOM.create("a", "DIV", form);
							var a= document.getElementById("a");
							handleDOM.create("b", "DIV", form);
							var b=document.getElementById("b");
							handleDOM.create("c", "DIV", form);
							var c=document.getElementById("c");
							handleDOM.create("d", "DIV", form);
							var d=document.getElementById("d");
							handleDOM.create("e", "DIV", form);
							var e=document.getElementById("e");
							handleDOM.create("f", "DIV", form);
							var f=document.getElementById("f");
							handleDOM.create("g", "DIV", form);
							var g=document.getElementById("g");
							handleDOM.create("h", "DIV", form);
							var h=document.getElementById("h");
							handleDOM.create("i", "DIV", form);
							var i=document.getElementById("i");
							handleDOM.create("j", "DIV", form);
							var j=document.getElementById("j");
							handleDOM.create("k", "DIV", form);
							var k=document.getElementById("k");
							handleDOM.create("l", "DIV", form);
							var l=document.getElementById("l");
							handleDOM.create("m", "DIV", form);
							var m=document.getElementById("m");
							handleDOM.create("n", "DIV", form);
							var n=document.getElementById("n");
							handleDOM.create("o", "DIV", form);
							var o=document.getElementById("o");
							handleDOM.create("p", "DIV", form);
							var p=document.getElementById("p");
							handleDOM.create("q", "DIV", form);
							var q=document.getElementById("q");
							handleDOM.create("r", "DIV", form);
							var r=document.getElementById("r");
							handleDOM.create("s", "DIV", form);
							var s=document.getElementById("s");
							handleDOM.create("t", "DIV", form);
							var t=document.getElementById("t");
							handleDOM.create("u", "DIV", form);
							var u=document.getElementById("u");
							handleDOM.create("v", "DIV", form);
							var v=document.getElementById("v");
							handleDOM.create("w", "DIV", form);
							var w=document.getElementById("w");
							handleDOM.create("x", "DIV", form);
							var x=document.getElementById("x");
							handleDOM.create("y", "DIV", form);
							var y=document.getElementById("y");
							handleDOM.create("z", "DIV", form);
							var z=document.getElementById("z");
							
							a.innerHTML="a";
							a.onclick=function(){
								
							}
							
							submit.onclick=function(){
							
								circle.type=answer.value;
								
								question.innerHTML="Name your Circle:<br>";
								handleDOM.remove("answer");
								handleDOM.create("answer", "INPUT", form);
								answer=document.getElementById("answer");
								answer.type="text";
								
								submit.onclick=function(){
									circle.name=answer.value;
									
									question.innerHTML="You have created, "+circle.name+", a "+circle.locked+" "+circle.type+" Circle.<br> Is this correct?";
									answer.type="hidden";
									
									submit.onclick=function(){
		//------------------------do database black magic here------------
										
										handleDOM.remove("cancel");
										handleDOM.remove("submit");
										handleDOM.remove("answer");
										handleDOM.remove("question");
										handleDOM.remove("form");
										
										page.main(em, pw);
									}
									
								}
							}
						}
						cancel.value="Start Over";
						cancel.onclick=function(){
								circle.locked=null;
								circle.type=null;
								circle.name=null;
						
								handleDOM.remove("cancel");
								handleDOM.remove("submit");
								handleDOM.remove("answer");
								handleDOM.remove("question");
								handleDOM.remove("form");
								page.newCircle(em, pw);
						}

					};
			},
		
		//=======================change settings page==================
			settings: function(em, pw){
			},
		
		//======================take new profile picture page==========
			newPic: function(em, pw){
			},
		
		//-=====================help page==============================
			help: function(em, pw){
			}
		
		}
		</script>
    

</body></html>